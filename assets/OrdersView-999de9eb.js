import{A as _,M as b}from"./AdminPagination-299abe5a.js";import{s as g}from"./useSweetAlertStore-8d5d52e8.js";import{m as O}from"./index-c6742e1e.js";import{b6 as v,av as y,aj as a,l as d,m as e,F as n,at as i,t as f,aJ as t,s as M}from"./_plugin-vue_export-helper-68081c38.js";import"./_commonjsHelpers-87174ba5.js";import"./base-component-3c0963ef.js";import"./runtime-dom.esm-bundler-eb0e3820.js";import"./vue-router-e29dd812.js";const{VITE_APP_URL:p,VITE_APP_PATH:m}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w7/",MODE:"production",DEV:!1,PROD:!0};let u="";const E={data(){return{orders:[],tempOrder:{},pageData:{}}},methods:{getOrders(l=1){this.$http.get(`${p}/v2/api/${m}/admin/orders?page=${l}`).then(r=>{this.orders=r.data.orders,this.pageData=r.data.pagination}).catch(r=>{this.loginCheckError(r.response.data.message)})},updateOrder(l){l.status=2,l.buyerMessage="強制塞入",this.$http.put(`${p}/v2/api/${m}/admin/order/${l.id}`,{order:l}).then(r=>{this.swalError(r)}).catch(r=>{this.swalToastTopEnd(r.response.data.message)})},openOrderModal(l){this.tempOrder={...l},u.show()},...O(g,["swalError","swalToastTopEnd","loginCheckError"])},components:{AdminPagination:_},mounted(){this.getOrders(),u=new b(document.querySelector("#orderModal"),{keyboard:!1}),document.title="訂單管理 | 鮮堡漢堡"}},D={class:"container py-3"},w=e("h2",{class:"ls-2"},"訂單管理",-1),P={class:"table table-hover"},T=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"訂單ID"),e("th",{scope:"col"},"訂單號碼"),e("th",{scope:"col"},"訂單時間"),e("th",{scope:"col"},"訂購人"),e("th",{scope:"col"},"訂單總額"),e("th",{scope:"col"},"付款狀態"),e("th",{scope:"col"},"產品製作進度"),e("th",{scope:"col"},"功能")])],-1),A=["onClick"],V={class:"d-flex justify-content-center"},k={class:"modal fade",id:"orderModal",ref:"orderModal",tabindex:"-1","aria-labelledby":"orderModalLabel","aria-hidden":"true"},Y={class:"modal-dialog modal-dialog-centered modal-xl"},C={class:"modal-content"},H={class:"modal-header"},L={class:"modal-title fs-5",id:"orderModalLabel"},S=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),x={class:"modal-body"},I={class:"row row-cols-3"},B={class:"cols"},R={class:"cols"},N={class:"cols"},U={class:"cols"},j={class:"table table-bordered"},q=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"品名"),e("th",{scope:"col"},"單價"),e("th",{scope:"col"},"數量"),e("th",{scope:"col"},"總價")])],-1),F=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1);function J(l,r,z,G,s,c){const h=y("admin-pagination");return a(),d(n,null,[e("div",D,[w,e("table",P,[T,e("tbody",null,[(a(!0),d(n,null,i(s.orders,o=>(a(),d("tr",{key:o.id},[e("th",null,t(o.id.substr(-4,4)),1),e("th",null,"#"+t(o.num),1),e("th",null,t(l.$moment(new Date(o.create_at*1e3)).format("YYYY-MM-DD HH:mm")),1),e("th",null,t(o.user.name)+" "+t(),1),e("td",null,t(o.total),1),e("td",null,t(o.is_paid),1),e("td",null,t(o.buyerMessage),1),e("td",null,[e("button",{type:"button",class:"btn btn-primary",onClick:K=>c.openOrderModal(o)}," 查看訂單 ",8,A)])]))),128))])]),e("div",V,[f(h,{"page-data":s.pageData,"get-products":c.getOrders},null,8,["page-data","get-products"])])]),e("div",k,[e("div",Y,[e("div",C,[e("div",H,[e("h1",L," 訂單編號#"+t(s.tempOrder.num)+" ("+t(s.tempOrder.id)+") ",1),S]),e("div",x,[e("h3",null,"訂單狀態："+t(s.tempOrder.orderStatues?s.tempOrder.orderStatues:"接收訂單"),1),e("h2",null,t(s.tempOrder.address?`內用：${s.tempOrder.address}`:"外帶"),1),e("div",I,[e("div",B," 訂單日期："+t(l.$moment(new Date(s.tempOrder.create_at*1e3)).format("YYYY-MM-DD HH:mm")),1),e("div",R,"訂購姓名："+t(s.tempOrder.user?s.tempOrder.user.name:""),1),e("div",N,"連絡電話："+t(s.tempOrder.user?s.tempOrder.user.tel:""),1),e("div",U,"客戶備註："+t(s.tempOrder.message),1)]),e("table",j,[q,e("tbody",null,[(a(!0),d(n,null,i(s.tempOrder.products,o=>(a(),d("tr",{key:o.id},[e("td",null,t(o.product.title),1),e("td",null,t(o.product.price),1),e("td",null,t(o.qty),1),e("td",null,t(o.total),1),M(" "+t(l.product),1)]))),128))])])]),F])])],512)],64)}const oe=v(E,[["render",J]]);export{oe as default};
