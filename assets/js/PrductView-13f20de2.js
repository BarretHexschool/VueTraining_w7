import{L as k}from"./LoadingDesign-df3df60d.js";import{c as y}from"./useCartStore-120d56e8.js";import{s as E}from"./useSweetAlertStore-2778a16d.js";import{E as w,a as S,F as A}from"./vee-validate.esm-51f435e3.js";import{m as P}from"./index-e59616dd.js";import{b6 as B,av as m,aj as c,l as r,t as d,m as i,aJ as u,j as D,b1 as n,k as h,F as _,at as v}from"./_plugin-vue_export-helper-68081c38.js";import"./axios-aba6f0e0.js";import"./vue-router-e29dd812.js";const{VITE_APP_URL:b,VITE_APP_PATH:L}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w7/",MODE:"production",DEV:!1,PROD:!0},F={data(){return{product:[],products:[],groupProduct:{},isLoading:!0,title:"鮮堡美食",drinkType:["冰","冷(去冰)","溫"],message:"",selectedOption1:"",selectedOption2:"",iceLevel:"冰"}},methods:{getProduct(){const{id:s}=this.$route.params;this.$http.get(`${b}/v2/api/${L}/product/${s}`).then(e=>{this.product=e.data.product,this.title=this.product.mainTitle,this.selectedOption1=this.product.select1,this.selectedOption2=this.product.select2,this.isSetProdcuct()}).catch(e=>{this.swalError(e.response.data.message)})},getAllProducts(){this.$http.get(`${b}/v2/api/${L}/products/all`).then(s=>{this.products=s.data.products,this.filterSetProduct(s.data.products)})},isSetProdcuct(){this.product.is_select===1?this.getAllProducts():this.isLoading=!1},filterSetProduct(s){const e=s.filter(p=>p.mainTitle===this.product.mainTitle);this.groupProduct=Object.values(this.gropuSetProduct(e))[0],this.isLoading=!1},gropuSetProduct(s){const e={};return s.forEach(p=>{const{mainTitle:o,select1:t,select2:a}=p;e[o]===void 0?e[o]={...p}:(t!==void 0&&(typeof e[o].select1=="string"?e[o].select1!==t&&(e[o].select1=[e[o].select1,t]):this.checkHas(e[o].select1,t)||(e[o].select1=[...e[o].select1,t])),typeof e[o].select2=="string"?e[o].select2!==a&&(e[o].select2=[e[o].select2,a]):this.checkHas(e[o].select2,a)||(e[o].select2=[...e[o].select2,a]))}),e},checkHas(s,e){return s.includes(e)},addToCartBtn(){let s=this.product.id;this.product.is_select===1&&(s=this.findId()),console.log(s),this.addToCart(s,1,this.message)},findId(){return this.selectedOption1===""&&(this.selectedOption1=void 0),this.selectedOption2===""&&(this.selectedOption2=void 0),this.iceLevel===""&&(this.iceLevel=void 0),this.products.find(e=>e.mainTitle===this.product.mainTitle&&e.select1===this.selectedOption1&&e.select2===this.selectedOption2&&e.iceLevel===this.iceLevel).id},...P(y,["addToCart"]),...P(E,["swalError","swalToastTopEnd"])},mounted(){this.getProduct(),document.title=`鮮堡漢堡 文化店 | ${this.title} `},watch:{title(s){document.title=`${this.title} | 鮮堡漢堡 文化店`}},components:{LoadingDesign:k,ErrorMessage:w,VForm:S,Field:A}},x={class:"w-100 pb-3"},C={class:"common-hero container"},U={class:"row row-cols-1 row-cols-lg-2"},I=["src"],H={class:""},j={class:"mb-2"},M={key:0,class:"mb-2 radioBox"},R=i("p",{class:"mb-0"},"主食選擇：",-1),q=i("p",{class:"invalid-feedback d-block my-0"}," *請選擇您所想要的主食 ",-1),N=["value"],G={key:1,class:"mb-2 radioBox"},J=i("p",{class:"mb-0"},"飲料選擇：",-1),z=i("p",{class:"invalid-feedback d-block my-0"}," *請問你要喝什麼？ ",-1),K=["value"],Q={key:2,class:"mb-2 radioBox"},W=i("p",{class:"mb-0"},"冰冷熱選擇：",-1),X=i("p",{class:"invalid-feedback d-block my-0"}," *請問要冰的？還是熱的？ ",-1),Y=["value"],Z=i("div",{class:"modal-footer justify-content-between"},[i("button",{type:"submit",class:"btn btn-secondary"},"放入購物車")],-1);function $(s,e,p,o,t,a){const O=m("LoadingDesign"),f=m("ErrorMessage"),g=m("Field"),V=m("VForm");return c(),r(_,null,[d(O,{"is-loading":t.isLoading},null,8,["is-loading"]),i("main",x,[i("section",C,[i("div",U,[i("img",{src:t.product.imageUrl,class:"img-fluid",alt:""},null,8,I),i("div",null,[i("div",H,[i("h2",j,u(t.product.mainTitle),1),i("h3",null,u(t.product.description),1),i("p",null,u(t.product.price)+" 元",1)]),t.product.is_select===1?(c(),D(V,{key:0,ref:"form",onSubmit:a.addToCartBtn},{default:n(()=>[t.groupProduct.select1?(c(),r("div",M,[R,d(f,{name:"selectedOption1"},{default:n(()=>[q]),_:1}),d(g,{id:"selectedOption1",name:"selectedOption1",as:"select",class:"form-select","aria-label":"Default select",rules:"required",modelValue:t.selectedOption1,"onUpdate:modelValue":e[0]||(e[0]=l=>t.selectedOption1=l)},{default:n(()=>[(c(!0),r(_,null,v(t.groupProduct.select1,l=>(c(),r("option",{value:l},u(l),9,N))),256))]),_:1},8,["modelValue"])])):h("",!0),t.groupProduct.select2?(c(),r("div",G,[J,d(f,{name:"selectedOption2"},{default:n(()=>[z]),_:1}),d(g,{id:"selectedOption2",name:"selectedOption2",as:"select",class:"form-select","aria-label":"Default select",rules:"required",modelValue:t.selectedOption2,"onUpdate:modelValue":e[1]||(e[1]=l=>t.selectedOption2=l)},{default:n(()=>[(c(!0),r(_,null,v(t.groupProduct.select2,l=>(c(),r("option",{value:l},u(l),9,K))),256))]),_:1},8,["modelValue"])])):h("",!0),t.groupProduct.iceLevel?(c(),r("div",Q,[W,d(f,{name:"iceLevel"},{default:n(()=>[X]),_:1}),d(g,{id:"iceLevel",name:"iceLevel",as:"select",class:"form-select","aria-label":"Default select",rules:"required",modelValue:t.iceLevel,"onUpdate:modelValue":e[2]||(e[2]=l=>t.iceLevel=l)},{default:n(()=>[(c(!0),r(_,null,v(t.drinkType,(l,T)=>(c(),r("option",{key:T,value:l},u(l),9,Y))),128))]),_:1},8,["modelValue"])])):h("",!0),Z]),_:1},8,["onSubmit"])):h("",!0)])])])])],64)}const de=B(F,[["render",$]]);export{de as default};
