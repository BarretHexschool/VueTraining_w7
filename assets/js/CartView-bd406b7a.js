import{c as _}from"./useCartStore-43e3e00a.js";import{s as C}from"./useSweetAlertStore-fda7acd7.js";import{a as k,m as b}from"./index-6ca8f258.js";import{b6 as $,av as c,aj as r,l as i,m as t,F as y,at as L,s as u,aJ as d,k as p,t as a,b1 as x,a3 as v,b3 as F}from"./_plugin-vue_export-helper-68081c38.js";import{L as A}from"./LoadingDesign-df3df60d.js";import{E as D,a as P,F as I}from"./vee-validate.esm-51f435e3.js";import{l as S}from"./runtime-dom.esm-bundler-eb0e3820.js";import"./axios-aba6f0e0.js";import"./vue-router-e29dd812.js";const U={data(){return{loadingItem:"",finalTotal:""}},computed:{...k(_,["carts"])},methods:{...b(_,["getCartData","deleteOneCart","swalClearAllCart"]),...b(C,["swalError","swalToastTopEnd"])},mounted(){this.getCartData()}},O={class:"table align-middle w-100 border-secondary p-1"},R=t("thead",null,[t("tr",{class:"w-100"},[t("th",null,"品名"),t("th",{class:"text-nowrap text-center"},"單價"),t("th",{class:"text-nowrap text-center"},"數量"),t("th",{class:"text-nowrap text-center"},"小計"),t("th")])],-1),M={class:"w-100"},B={key:0},N=t("br",null,null,-1),j={key:1,class:"text-success"},q={class:"text-center"},z={class:"text-center"},H={class:"text-center"},J=["onClick","disabled"],G={key:0,class:"fas fa-spinner fa-pulse"},K={class:"border-transparent"},Q=t("td",{colspan:"4",class:"text-end border-0"},"總計",-1),W={class:"text-end border-0"},X={class:"d-flex justify-content-between mb-4"};function Y(n,e,h,E,o,V){const f=c("RouterLink");return r(),i(y,null,[t("table",O,[R,t("tbody",M,[n.carts?(r(!0),i(y,{key:0},L(n.carts,s=>(r(),i("tr",{key:s.id},[t("td",null,[u(d(s.product.title)+" ",1),s.message?(r(),i("span",B,[N,u("*"+d(s.message),1)])):p("",!0),s.coupon?(r(),i("div",j,"已套用優惠券")):p("",!0)]),t("td",q,d(s.product.price),1),t("td",z,d(s.qty),1),t("td",H,d(s.total),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:m=>n.deleteOneCart(s.id),disabled:s.id===o.loadingItem},[o.loadingItem===s.id?(r(),i("i",G)):p("",!0),u(" x ")],8,J)])]))),128)):p("",!0)]),t("tfoot",K,[t("tr",null,[Q,t("td",W,d(o.finalTotal),1)])])]),t("div",X,[t("button",{class:"btn btn-danger",type:"button",onClick:e[0]||(e[0]=(...s)=>n.swalClearAllCart&&n.swalClearAllCart(...s))}," 清空商品 "),a(f,{class:"btn btn-secondary",type:"button",to:"/products"},{default:x(()=>[u("想點更多")]),_:1})])],64)}const Z=$(U,[["render",Y]]),{VITE_APP_URL:tt,VITE_APP_PATH:et}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w7/",MODE:"production",DEV:!1,PROD:!0},st={data(){return{isLoading:!0,form:{user:{name:"",tel:"",address:"take-out",email:"no-email"},message:"",orderStatus:""}}},methods:{createOrder(){const n=this.form;this.$http.post(`${tt}/v2/api/${et}/order`,{data:n}).then(e=>{const{orderId:h}=e.data;this.$swal(e.data.message),this.$refs.form.resetForm(),this.$router.push(`/cartfinal/${h}`)}).catch(e=>{this.swalError(e)})},...b(_,["getCartData"]),...b(C,["swalError","swalToastTopEnd"])},computed:{...k(_,["carts","finalTotal"])},components:{FrontCart:Z,LoadingDesign:A,ErrorMessage:D,VForm:P,Field:I},mounted(){this.getCartData("CartView"),this.isLoading=!1,document.title="鮮堡漢堡 文化店 | 購物車"}},ot={class:"w-100 position-relative z-2"},at={class:"common-hero container"},nt=t("div",{class:"position-relative m-5"},[t("div",{class:"progress bg-third",style:{height:"2px"}},[t("div",{class:"progress-bar bg-danger",role:"progressbar","aria-label":"Progress",style:{width:"33.33%"},"aria-valuenow":"33.33","aria-valuemin":"0","aria-valuemax":"100"})]),t("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-danger rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-0 translate-middle pt-6 fs-7 fw-bold"}," 選擇餐點 "),t("button",{type:"button",class:"position-absolute top-0 start-33 translate-middle btn btn-sm btn-danger rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-33 translate-middle pt-6 fs-7 fw-bold"}," 訂購資料 "),t("button",{type:"button",class:"position-absolute top-0 start-66 translate-middle btn btn-sm btn-third rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-66 translate-middle pt-6 fs-7 text-secondary"}," 餐點準備中 "),t("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-third rounded-pill",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-100 translate-middle pt-6 fs-7 text-secondary text-nowrap"}," 完成取餐 ")],-1),lt={class:"row row-cols-1 row-cols-lg-2 p-1 pb-6"},rt={class:"col mt-2 mt-lg-5"},it={class:"col"},dt={class:"row justify-content-center bg-third rounded rounded-4 rounded-lg-6 p-4 p-md-7"},ct=t("h2",{class:"mb-2 mb-lg-3"},"請輸入訂購資料",-1),mt={class:"mb-3"},ut=t("label",{for:"desk",class:"form-label"},"桌次",-1),pt=t("option",{value:"take-out"},"外帶",-1),_t=t("option",{value:"1"},"1",-1),bt=t("option",{value:"2"},"2",-1),ht=t("option",{value:"3"},"3",-1),ft=t("option",{value:"5"},"5",-1),gt=t("option",{value:"6"},"6",-1),wt=t("option",{value:"7"},"7",-1),vt=t("option",{value:"8"},"8",-1),yt=t("option",{value:"9"},"9",-1),xt={class:"mb-3"},Vt=t("label",{for:"name",class:"form-label"},"訂購人姓名*",-1),Ct={class:"mb-3"},kt=t("label",{for:"tel",class:"form-label"},"聯絡電話*",-1),$t={class:"mb-3"},Et=t("label",{for:"message",class:"form-label"},"備註留言",-1),Tt=t("div",{class:"text-center w-100"},[t("button",{type:"submit",class:"btn btn-danger w-100"},"送出訂單")],-1);function Lt(n,e,h,E,o,V){const f=c("LoadingDesign"),s=c("FrontCart"),m=c("Field"),g=c("ErrorMessage"),T=c("VForm");return r(),i(y,null,[a(f,{"is-Loading":o.isLoading},null,8,["is-Loading"]),t("main",ot,[t("section",at,[nt,t("div",lt,[t("div",rt,[a(s)]),t("div",it,[t("div",dt,[ct,a(T,{ref:"form",onSubmit:V.createOrder},{default:x(({errors:w})=>[t("div",mt,[ut,a(m,{id:"desk",name:"desk",as:"select",class:v(["form-select",{"is-invalid":w.桌號}]),modelValue:o.form.user.address,"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.user.address=l)},{default:x(()=>[pt,_t,bt,ht,ft,gt,wt,vt,yt]),_:2},1032,["class","modelValue"]),a(g,{name:"桌號",class:"invalid-feedback"})]),t("div",xt,[Vt,a(m,{id:"name",name:"姓名",type:"text",class:v(["form-control",{"is-invalid":w.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=l=>o.form.user.name=l)},null,8,["class","modelValue"]),a(g,{name:"姓名",class:"invalid-feedback"})]),t("div",Ct,[kt,a(m,{id:"tel",name:"電話",type:"tel",class:v(["form-control",{"is-invalid":w.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:o.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=l=>o.form.user.tel=l)},null,8,["class","modelValue"]),a(g,{name:"電話",class:"invalid-feedback"})]),t("div",$t,[Et,F(t("textarea",{id:"message",name:"message",class:"form-control",placeholder:"如果有任何餐點製作需求，您可在此留言，我們將盡量配合。",cols:"30",rows:"10","onUpdate:modelValue":e[3]||(e[3]=l=>o.form.message=l)},null,512),[[S,o.form.message]])]),Tt]),_:1},8,["onSubmit"])])])])])])],64)}const Mt=$(st,[["render",Lt]]);export{Mt as default};
