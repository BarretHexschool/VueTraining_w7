import{c as _}from"./useCartStore-86e57720.js";import{s as C}from"./useSweetAlertStore-74f5c1a2.js";import{a as V,m as b}from"./index-860981c7.js";import{b6 as k,av as c,aj as r,l as i,m as t,F as x,at as E,s as u,aJ as d,k as p,t as a,b1 as w,a3 as g,b3 as A}from"./_plugin-vue_export-helper-68081c38.js";import{l as P}from"./runtime-dom.esm-bundler-eb0e3820.js";import"./axios-aba6f0e0.js";import"./vue-router-e29dd812.js";const D={data(){return{loadingItem:"",finalTotal:""}},computed:{...V(_,["carts"])},methods:{...b(_,["getCartData","deleteOneCart","swalClearAllCart"]),...b(C,["swalError","swalToastTopEnd"])},mounted(){this.getCartData()}},I={class:"table align-middle w-100 border-secondary p-1"},S=t("thead",null,[t("tr",{class:"w-100"},[t("th",null,"品名"),t("th",{class:"text-nowrap text-center"},"單價"),t("th",{class:"text-nowrap text-center"},"數量"),t("th",{class:"text-nowrap text-center"},"小計"),t("th")])],-1),U={class:"w-100"},F={key:0},O=t("br",null,null,-1),B={key:1,class:"text-success"},L={class:"text-center"},M={class:"text-center"},N={class:"text-center"},R=["onClick","disabled"],j={key:0,class:"fas fa-spinner fa-pulse"},q={class:"border-transparent"},z=t("td",{colspan:"4",class:"text-end border-0"},"總計",-1),H={class:"text-end border-0"},J={class:"d-flex justify-content-between mb-4"};function G(l,s,h,$,o,y){const f=c("router-link");return r(),i(x,null,[t("table",I,[S,t("tbody",U,[l.carts?(r(!0),i(x,{key:0},E(l.carts,e=>(r(),i("tr",{key:e.id},[t("td",null,[u(d(e.product.title)+" ",1),e.message?(r(),i("span",F,[O,u("*"+d(e.message),1)])):p("",!0),e.coupon?(r(),i("div",B,"已套用優惠券")):p("",!0)]),t("td",L,d(e.product.price),1),t("td",M,d(e.qty),1),t("td",N,d(e.total),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:m=>l.deleteOneCart(e.id),disabled:e.id===o.loadingItem},[o.loadingItem===e.id?(r(),i("i",j)):p("",!0),u(" x ")],8,R)])]))),128)):p("",!0)]),t("tfoot",q,[t("tr",null,[z,t("td",H,d(o.finalTotal),1)])])]),t("div",J,[t("button",{class:"btn btn-danger",type:"button",onClick:s[0]||(s[0]=(...e)=>l.swalClearAllCart&&l.swalClearAllCart(...e))}," 清空商品 "),a(f,{class:"btn btn-secondary",type:"button",to:"/products"},{default:w(()=>[u("想點更多")]),_:1})])],64)}const K=k(D,[["render",G]]),{VITE_APP_URL:Q,VITE_APP_PATH:W}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w7/",MODE:"production",DEV:!1,PROD:!0},X={data(){return{products:[],productID:"",finalTotal:"",form:{user:{name:"",tel:"",address:"take-out",email:"no-email"},message:"",orderStatus:""},visible:!1}},methods:{createOrder(){const l=this.form;this.$http.post(`${Q}/v2/api/${W}/order`,{data:l}).then(s=>{const{orderId:h}=s.data;this.$swal(s.data.message),this.$refs.form.resetForm(),this.$router.push(`/cartfinal/${h}`)}).catch(s=>{this.swalError(s)})},...b(_,["getCartData"]),...b(C,["swalError","swalToastTopEnd"])},computed:{...V(_,["carts"])},components:{FrontCart:K},mounted(){this.getCartData("CartView"),this.visible=!0,document.title="鮮堡漢堡 文化店 | 購物車"}},Y={class:"w-100 position-relative z-2"},Z={class:"common-hero container"},tt=t("div",{class:"position-relative m-5"},[t("div",{class:"progress bg-third",style:{height:"2px"}},[t("div",{class:"progress-bar bg-danger",role:"progressbar","aria-label":"Progress",style:{width:"33.33%"},"aria-valuenow":"33.33","aria-valuemin":"0","aria-valuemax":"100"})]),t("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-danger rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-0 translate-middle pt-6 fs-7 fw-bold"}," 選擇餐點 "),t("button",{type:"button",class:"position-absolute top-0 start-33 translate-middle btn btn-sm btn-danger rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-33 translate-middle pt-6 fs-7 fw-bold"}," 訂購資料 "),t("button",{type:"button",class:"position-absolute top-0 start-66 translate-middle btn btn-sm btn-third rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-66 translate-middle pt-6 fs-7 text-secondary"}," 餐點準備中 "),t("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-third rounded-pill",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-100 translate-middle pt-6 fs-7 text-secondary text-nowrap"}," 完成取餐 ")],-1),et={class:"row row-cols-1 row-cols-lg-2 p-1 pb-6"},st={class:"col mt-2 mt-lg-5"},ot={class:"col"},at={class:"row justify-content-center bg-third rounded rounded-4 rounded-lg-6 p-4 p-md-7"},lt=t("h2",{class:"mb-2 mb-lg-3"},"請輸入訂購資料",-1),nt={class:"mb-3"},rt=t("label",{for:"desk",class:"form-label"},"桌次",-1),it=t("option",{value:"take-out"},"外帶",-1),dt=t("option",{value:"1"},"1",-1),ct=t("option",{value:"2"},"2",-1),mt=t("option",{value:"3"},"3",-1),ut=t("option",{value:"5"},"5",-1),pt=t("option",{value:"6"},"6",-1),_t=t("option",{value:"7"},"7",-1),bt=t("option",{value:"8"},"8",-1),ht=t("option",{value:"9"},"9",-1),ft={class:"mb-3"},vt=t("label",{for:"name",class:"form-label"},"訂購人姓名",-1),gt={class:"mb-3"},wt=t("label",{for:"tel",class:"form-label"},"聯絡電話",-1),yt={class:"mb-3"},xt=t("label",{for:"message",class:"form-label"},"備註留言",-1),Ct=t("div",{class:"text-center w-100"},[t("button",{type:"submit",class:"btn btn-danger w-100"},"送出訂單")],-1);function Vt(l,s,h,$,o,y){const f=c("FrontCart"),e=c("v-field"),m=c("ErrorMessage"),T=c("v-form");return r(),i("main",Y,[t("section",Z,[tt,t("div",et,[t("div",st,[a(f)]),t("div",ot,[t("div",at,[lt,a(T,{ref:"form",onSubmit:y.createOrder},{default:w(({errors:v})=>[t("div",nt,[rt,a(e,{id:"desk",name:"desk",as:"select",class:g(["form-select",{"is-invalid":v.桌號}]),modelValue:o.form.user.address,"onUpdate:modelValue":s[0]||(s[0]=n=>o.form.user.address=n)},{default:w(()=>[it,dt,ct,mt,ut,pt,_t,bt,ht]),_:2},1032,["class","modelValue"]),a(m,{name:"桌號",class:"invalid-feedback"})]),t("div",ft,[vt,a(e,{id:"name",name:"姓名",type:"text",class:g(["form-control",{"is-invalid":v.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=n=>o.form.user.name=n)},null,8,["class","modelValue"]),a(m,{name:"姓名",class:"invalid-feedback"})]),t("div",gt,[wt,a(e,{id:"tel",name:"電話",type:"tel",class:g(["form-control",{"is-invalid":v.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:o.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=n=>o.form.user.tel=n)},null,8,["class","modelValue"]),a(m,{name:"電話",class:"invalid-feedback"})]),t("div",yt,[xt,A(t("textarea",{id:"message",class:"form-control",placeholder:"如果有任何餐點製作需求，您可在此留言，我們將盡量配合。",cols:"30",rows:"10","onUpdate:modelValue":s[3]||(s[3]=n=>o.form.message=n)},null,512),[[P,o.form.message]])]),Ct]),_:1},8,["onSubmit"])])])])])])}const It=k(X,[["render",Vt]]);export{It as default};
