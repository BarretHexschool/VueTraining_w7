import{c as u}from"./useCartStore-4be76b3d.js";import{s as y}from"./useSweetAlertStore-03a9df9a.js";import{a as $,m as p}from"./index-9cf4610f.js";import{b6 as F,av as l,aj as i,l as d,m as t,F as C,at as L,s as m,aJ as c,k as _,t as a,b1 as V,a3 as w,b3 as A}from"./_plugin-vue_export-helper-68081c38.js";import{L as D}from"./LoadingDesign-df3df60d.js";import{F as P}from"./FrontCartBar-333f60b6.js";import{E as S,a as I,F as B}from"./vee-validate.esm-51f435e3.js";import{l as U}from"./runtime-dom.esm-bundler-eb0e3820.js";import"./axios-aba6f0e0.js";import"./vue-router-e29dd812.js";const O={data(){return{loadingItem:""}},computed:{...$(u,["carts","finalTotal"])},methods:{...p(u,["getCartData","deleteOneCart","swalClearAllCart"]),...p(y,["swalError","swalToastTopEnd"])},mounted(){this.getCartData()}},R={class:"table align-middle w-100 border-secondary p-1"},M=t("thead",null,[t("tr",{class:"w-100"},[t("th",null,"品名"),t("th",{class:"text-nowrap text-center"},"單價"),t("th",{class:"text-nowrap text-center"},"數量"),t("th",{class:"text-nowrap text-center"},"小計"),t("th")])],-1),N={class:"w-100"},j={key:0},q=t("br",null,null,-1),z={key:1,class:"text-success"},H={class:"text-center"},J={class:"text-center"},G={class:"text-center"},K={class:"text-end"},Q=["onClick","disabled"],W={key:0,class:"fas fa-spinner fa-pulse"},X={class:"border-transparent"},Y=t("td",{colspan:"4",class:"text-end border-0"},"總計",-1),Z={class:"text-end border-0"},tt={class:"d-flex justify-content-between mb-4"};function et(n,e,h,E,o,k){const f=l("RouterLink");return i(),d(C,null,[t("table",R,[M,t("tbody",N,[n.carts?(i(!0),d(C,{key:0},L(n.carts,s=>(i(),d("tr",{key:s.id},[t("td",null,[m(c(s.product.title)+" ",1),s.message?(i(),d("span",j,[q,m("*"+c(s.message),1)])):_("",!0),s.coupon?(i(),d("div",z,"已套用優惠券")):_("",!0)]),t("td",H,c(s.product.price),1),t("td",J,c(s.qty),1),t("td",G,c(s.total),1),t("td",K,[t("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:x=>n.deleteOneCart(s.id),disabled:s.id===o.loadingItem},[o.loadingItem===s.id?(i(),d("i",W)):_("",!0),m(" x ")],8,Q)])]))),128)):_("",!0)]),t("tfoot",X,[t("tr",null,[Y,t("td",Z,c(n.finalTotal),1)])])]),t("div",tt,[t("button",{class:"btn btn-danger",type:"button",onClick:e[0]||(e[0]=(...s)=>n.swalClearAllCart&&n.swalClearAllCart(...s))}," 清空商品 "),a(f,{class:"btn btn-secondary",type:"button",to:"/products"},{default:V(()=>[m("想點更多")]),_:1})])],64)}const st=F(O,[["render",et]]),{VITE_APP_URL:ot,VITE_APP_PATH:at}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w7/",MODE:"production",DEV:!1,PROD:!0},nt={data(){return{isLoading:!0,form:{user:{name:"",tel:"",address:"take-out",email:"no-email"},message:"",orderStatus:""}}},methods:{createOrder(){const n=this.form;this.$http.post(`${ot}/v2/api/${at}/order`,{data:n}).then(e=>{const{orderId:h}=e.data;this.$refs.form.resetForm(),this.$router.push(`/cartPay/${h}`)}).catch(e=>{this.swalError(e)})},...p(u,["getCartData"]),...p(y,["swalError","swalToastTopEnd"])},computed:{...$(u,["carts","finalTotal"])},components:{FrontCart:st,LoadingDesign:D,FrontCartBar:P,ErrorMessage:S,VForm:I,Field:B},mounted(){this.getCartData("CartView"),this.isLoading=!1,document.title="鮮堡漢堡 文化店 | 購物車"}},rt={class:"w-100 position-relative z-2"},lt={class:"common-hero container"},it={class:"row row-cols-1 row-cols-lg-2 p-1 pb-6"},dt={class:"col mt-2 mt-lg-5"},ct={class:"col"},mt={class:"row justify-content-center bg-third rounded rounded-4 rounded-lg-6 p-4 p-md-7"},_t=t("h2",{class:"mb-2 mb-lg-3"},"請輸入訂購資料",-1),ut={class:"mb-3"},pt=t("label",{for:"desk",class:"form-label"},"桌次",-1),ht=t("option",{value:"take-out"},"外帶",-1),ft=t("option",{value:"1"},"1",-1),bt=t("option",{value:"2"},"2",-1),gt=t("option",{value:"3"},"3",-1),vt=t("option",{value:"5"},"5",-1),wt=t("option",{value:"6"},"6",-1),Ct=t("option",{value:"7"},"7",-1),Vt=t("option",{value:"8"},"8",-1),kt=t("option",{value:"9"},"9",-1),xt={class:"mb-3"},yt=t("label",{for:"name",class:"form-label"},"訂購人姓名*",-1),$t={class:"mb-3"},Ft=t("label",{for:"tel",class:"form-label"},"聯絡電話*",-1),Et={class:"mb-3"},Tt=t("label",{for:"message",class:"form-label"},"備註留言",-1),Lt=t("div",{class:"text-center w-100"},[t("button",{type:"submit",class:"btn btn-danger w-100"},"送出訂單")],-1);function At(n,e,h,E,o,k){const f=l("LoadingDesign"),s=l("FrontCartBar"),x=l("FrontCart"),b=l("Field"),g=l("ErrorMessage"),T=l("VForm");return i(),d(C,null,[a(f,{"is-Loading":o.isLoading},null,8,["is-Loading"]),t("main",rt,[t("section",lt,[a(s,{currentState:"訂購內容"}),t("div",it,[t("div",dt,[a(x)]),t("div",ct,[t("div",mt,[_t,a(T,{ref:"form",onSubmit:k.createOrder},{default:V(({errors:v})=>[t("div",ut,[pt,a(b,{id:"desk",name:"desk",as:"select",class:w(["form-select",{"is-invalid":v.桌號}]),modelValue:o.form.user.address,"onUpdate:modelValue":e[0]||(e[0]=r=>o.form.user.address=r)},{default:V(()=>[ht,ft,bt,gt,vt,wt,Ct,Vt,kt]),_:2},1032,["class","modelValue"]),a(g,{name:"桌號",class:"invalid-feedback"})]),t("div",xt,[yt,a(b,{id:"name",name:"姓名",type:"text",class:w(["form-control",{"is-invalid":v.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.user.name=r)},null,8,["class","modelValue"]),a(g,{name:"姓名",class:"invalid-feedback"})]),t("div",$t,[Ft,a(b,{id:"tel",name:"電話",type:"tel",class:w(["form-control",{"is-invalid":v.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:o.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.user.tel=r)},null,8,["class","modelValue"]),a(g,{name:"電話",class:"invalid-feedback"})]),t("div",Et,[Tt,A(t("textarea",{id:"message",name:"message",class:"form-control",placeholder:"如果有任何餐點製作需求，您可在此留言，我們將盡量配合。",cols:"30",rows:"10","onUpdate:modelValue":e[3]||(e[3]=r=>o.form.message=r)},null,512),[[U,o.form.message]])]),Lt]),_:1},8,["onSubmit"])])])])])])],64)}const jt=F(nt,[["render",At]]);export{jt as default};
