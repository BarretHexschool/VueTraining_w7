import{c as _}from"./useCartStore-e7c6a337.js";import{s as C}from"./useSweetAlertStore-8261f0c8.js";import{a as k,m as b}from"./index-f29d177b.js";import{b6 as $,av as c,aj as r,l as i,m as t,F as y,at as F,s as u,aJ as d,k as p,t as a,b1 as x,a3 as w,b3 as A}from"./_plugin-vue_export-helper-68081c38.js";import{E as L,a as P,F as D}from"./vee-validate.esm-51f435e3.js";import{l as I}from"./runtime-dom.esm-bundler-eb0e3820.js";import"./axios-aba6f0e0.js";import"./vue-router-e29dd812.js";const S={data(){return{loadingItem:"",finalTotal:""}},computed:{...k(_,["carts"])},methods:{...b(_,["getCartData","deleteOneCart","swalClearAllCart"]),...b(C,["swalError","swalToastTopEnd"])},mounted(){this.getCartData()}},U={class:"table align-middle w-100 border-secondary p-1"},O=t("thead",null,[t("tr",{class:"w-100"},[t("th",null,"品名"),t("th",{class:"text-nowrap text-center"},"單價"),t("th",{class:"text-nowrap text-center"},"數量"),t("th",{class:"text-nowrap text-center"},"小計"),t("th")])],-1),R={class:"w-100"},M={key:0},B=t("br",null,null,-1),N={key:1,class:"text-success"},j={class:"text-center"},q={class:"text-center"},z={class:"text-center"},H=["onClick","disabled"],J={key:0,class:"fas fa-spinner fa-pulse"},G={class:"border-transparent"},K=t("td",{colspan:"4",class:"text-end border-0"},"總計",-1),Q={class:"text-end border-0"},W={class:"d-flex justify-content-between mb-4"};function X(n,e,h,E,o,V){const f=c("RouterLink");return r(),i(y,null,[t("table",U,[O,t("tbody",R,[n.carts?(r(!0),i(y,{key:0},F(n.carts,s=>(r(),i("tr",{key:s.id},[t("td",null,[u(d(s.product.title)+" ",1),s.message?(r(),i("span",M,[B,u("*"+d(s.message),1)])):p("",!0),s.coupon?(r(),i("div",N,"已套用優惠券")):p("",!0)]),t("td",j,d(s.product.price),1),t("td",q,d(s.qty),1),t("td",z,d(s.total),1),t("td",null,[t("button",{type:"button",class:"btn btn-outline-secondary btn-sm",onClick:m=>n.deleteOneCart(s.id),disabled:s.id===o.loadingItem},[o.loadingItem===s.id?(r(),i("i",J)):p("",!0),u(" x ")],8,H)])]))),128)):p("",!0)]),t("tfoot",G,[t("tr",null,[K,t("td",Q,d(o.finalTotal),1)])])]),t("div",W,[t("button",{class:"btn btn-danger",type:"button",onClick:e[0]||(e[0]=(...s)=>n.swalClearAllCart&&n.swalClearAllCart(...s))}," 清空商品 "),a(f,{class:"btn btn-secondary",type:"button",to:"/products"},{default:x(()=>[u("想點更多")]),_:1})])],64)}const Y=$(S,[["render",X]]),{VITE_APP_URL:Z,VITE_APP_PATH:tt}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w7/",MODE:"production",DEV:!1,PROD:!0},et={data(){return{isLoading:!0,form:{user:{name:"",tel:"",address:"take-out",email:"no-email"},message:"",orderStatus:""},visible:!1}},methods:{createOrder(){const n=this.form;this.$http.post(`${Z}/v2/api/${tt}/order`,{data:n}).then(e=>{const{orderId:h}=e.data;this.$swal(e.data.message),this.$refs.form.resetForm(),this.$router.push(`/cartfinal/${h}`)}).catch(e=>{this.swalError(e)})},...b(_,["getCartData"]),...b(C,["swalError","swalToastTopEnd"])},computed:{...k(_,["carts","finalTotal"])},components:{FrontCart:Y,ErrorMessage:L,VForm:P,Field:D},mounted(){this.getCartData("CartView"),this.visible=!0,document.title="鮮堡漢堡 文化店 | 購物車"}},st={class:"w-100 position-relative z-2"},ot={class:"common-hero container"},at=t("div",{class:"position-relative m-5"},[t("div",{class:"progress bg-third",style:{height:"2px"}},[t("div",{class:"progress-bar bg-danger",role:"progressbar","aria-label":"Progress",style:{width:"33.33%"},"aria-valuenow":"33.33","aria-valuemin":"0","aria-valuemax":"100"})]),t("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-danger rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-0 translate-middle pt-6 fs-7 fw-bold"}," 選擇餐點 "),t("button",{type:"button",class:"position-absolute top-0 start-33 translate-middle btn btn-sm btn-danger rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-33 translate-middle pt-6 fs-7 fw-bold"}," 訂購資料 "),t("button",{type:"button",class:"position-absolute top-0 start-66 translate-middle btn btn-sm btn-third rounded-pill text-white",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-66 translate-middle pt-6 fs-7 text-secondary"}," 餐點準備中 "),t("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-third rounded-pill",style:{width:"1rem",height:"1rem"}}),t("p",{class:"position-absolute top-0 start-100 translate-middle pt-6 fs-7 text-secondary text-nowrap"}," 完成取餐 ")],-1),nt={class:"row row-cols-1 row-cols-lg-2 p-1 pb-6"},lt={class:"col mt-2 mt-lg-5"},rt={class:"col"},it={class:"row justify-content-center bg-third rounded rounded-4 rounded-lg-6 p-4 p-md-7"},dt=t("h2",{class:"mb-2 mb-lg-3"},"請輸入訂購資料",-1),ct={class:"mb-3"},mt=t("label",{for:"desk",class:"form-label"},"桌次",-1),ut=t("option",{value:"take-out"},"外帶",-1),pt=t("option",{value:"1"},"1",-1),_t=t("option",{value:"2"},"2",-1),bt=t("option",{value:"3"},"3",-1),ht=t("option",{value:"5"},"5",-1),ft=t("option",{value:"6"},"6",-1),gt=t("option",{value:"7"},"7",-1),vt=t("option",{value:"8"},"8",-1),wt=t("option",{value:"9"},"9",-1),yt={class:"mb-3"},xt=t("label",{for:"name",class:"form-label"},"訂購人姓名*",-1),Vt={class:"mb-3"},Ct=t("label",{for:"tel",class:"form-label"},"聯絡電話*",-1),kt={class:"mb-3"},$t=t("label",{for:"message",class:"form-label"},"備註留言",-1),Et=t("div",{class:"text-center w-100"},[t("button",{type:"submit",class:"btn btn-danger w-100"},"送出訂單")],-1);function Tt(n,e,h,E,o,V){const f=c("LoadingDesign"),s=c("FrontCart"),m=c("Field"),g=c("ErrorMessage"),T=c("VForm");return r(),i(y,null,[a(f,{"is-Loading":o.isLoading},null,8,["is-Loading"]),t("main",st,[t("section",ot,[at,t("div",nt,[t("div",lt,[a(s)]),t("div",rt,[t("div",it,[dt,a(T,{ref:"form",onSubmit:V.createOrder},{default:x(({errors:v})=>[t("div",ct,[mt,a(m,{id:"desk",name:"desk",as:"select",class:w(["form-select",{"is-invalid":v.桌號}]),modelValue:o.form.user.address,"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.user.address=l)},{default:x(()=>[ut,pt,_t,bt,ht,ft,gt,vt,wt]),_:2},1032,["class","modelValue"]),a(g,{name:"桌號",class:"invalid-feedback"})]),t("div",yt,[xt,a(m,{id:"name",name:"姓名",type:"text",class:w(["form-control",{"is-invalid":v.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=l=>o.form.user.name=l)},null,8,["class","modelValue"]),a(g,{name:"姓名",class:"invalid-feedback"})]),t("div",Vt,[Ct,a(m,{id:"tel",name:"電話",type:"tel",class:w(["form-control",{"is-invalid":v.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:o.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=l=>o.form.user.tel=l)},null,8,["class","modelValue"]),a(g,{name:"電話",class:"invalid-feedback"})]),t("div",kt,[$t,A(t("textarea",{id:"message",name:"message",class:"form-control",placeholder:"如果有任何餐點製作需求，您可在此留言，我們將盡量配合。",cols:"30",rows:"10","onUpdate:modelValue":e[3]||(e[3]=l=>o.form.message=l)},null,512),[[I,o.form.message]])]),Et]),_:1},8,["onSubmit"])])])])])])],64)}const Ot=$(et,[["render",Tt]]);export{Ot as default};
