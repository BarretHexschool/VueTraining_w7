import{L as k}from"./LoadingDesign-df3df60d.js";import{c as y}from"./useCartStore-c09788c5.js";import{s as E}from"./useSweetAlertStore-528bc6fe.js";import{E as w,a as B,F as S}from"./vee-validate.esm-51f435e3.js";import{m as b}from"./index-46bba238.js";import{b6 as A,av as h,aj as c,l as r,t as n,m as o,aJ as a,j as C,b1 as u,k as m,s as D,F as _,at as v}from"./_plugin-vue_export-helper-68081c38.js";import"./axios-aba6f0e0.js";import"./vue-router-e29dd812.js";const{VITE_APP_URL:P,VITE_APP_PATH:T}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"2259buyer",BASE_URL:"/VueTraining_w7/",MODE:"production",DEV:!1,PROD:!0},F={data(){return{product:[],products:[],groupProduct:{},isLoading:!0,title:"鮮堡美食",drinkType:["冰","冷(去冰)","溫"],message:"",selectedOption1:"",selectedOption2:"",iceLevel:"冰"}},methods:{getProduct(){const{id:i}=this.$route.params;this.$http.get(`${P}/v2/api/${T}/product/${i}`).then(e=>{this.product=e.data.product,this.title=this.product.mainTitle,this.selectedOption1=this.product.select1,this.selectedOption2=this.product.select2,this.isSetProdcuct()}).catch(e=>{this.swalError(e.response.data.message)})},getAllProducts(){this.$http.get(`${P}/v2/api/${T}/products/all`).then(i=>{this.products=i.data.products,this.filterSetProduct(i.data.products)})},isSetProdcuct(){this.product.is_select===1?this.getAllProducts():this.isLoading=!1},filterSetProduct(i){const e=i.filter(p=>p.mainTitle===this.product.mainTitle);this.groupProduct=Object.values(this.gropuSetProduct(e))[0],this.isLoading=!1},gropuSetProduct(i){const e={};return i.forEach(p=>{const{mainTitle:s,select1:t,select2:d}=p;e[s]===void 0?e[s]={...p}:(t!==void 0&&(typeof e[s].select1=="string"?e[s].select1!==t&&(e[s].select1=[e[s].select1,t]):this.checkHas(e[s].select1,t)||(e[s].select1=[...e[s].select1,t])),typeof e[s].select2=="string"?e[s].select2!==d&&(e[s].select2=[e[s].select2,d]):this.checkHas(e[s].select2,d)||(e[s].select2=[...e[s].select2,d]))}),e},checkHas(i,e){return i.includes(e)},addToCartBtn(){let i=this.product.id;this.product.is_select===1&&(i=this.findId()),this.addToCart(i,1,this.message)},findId(){return this.selectedOption1===""&&(this.selectedOption1=void 0),this.selectedOption2===""&&(this.selectedOption2=void 0),this.iceLevel===""&&(this.iceLevel=void 0),this.products.find(e=>e.mainTitle===this.product.mainTitle&&e.select1===this.selectedOption1&&e.select2===this.selectedOption2&&e.iceLevel===this.iceLevel).id},...b(y,["addToCart"]),...b(E,["swalError","swalToastTopEnd"])},mounted(){this.getProduct(),document.title=`鮮堡漢堡 文化店 | ${this.title} `},watch:{title(i){document.title=`${this.title} | 鮮堡漢堡 文化店`}},components:{LoadingDesign:k,ErrorMessage:w,VForm:B,Field:S}},x={class:"w-100 pb-3"},U={class:"common-hero container"},I={class:"row row-cols-1 row-cols-lg-2"},H=["src"],j={class:""},M={class:"mb-2"},N={key:0,class:"mb-2 radioBox"},R=o("p",{class:"mb-0"},"主食選擇：",-1),q=o("p",{class:"invalid-feedback d-block my-0"}," *請選擇您所想要的主食 ",-1),G=["value"],J={key:1,class:"mb-2 radioBox"},z=o("p",{class:"mb-0"},"飲料選擇：",-1),K=o("p",{class:"invalid-feedback d-block my-0"}," *請問你要喝什麼？ ",-1),Q=["value"],W={key:2,class:"mb-2 radioBox"},X=o("p",{class:"mb-0"},"冰冷熱選擇：",-1),Y=o("p",{class:"invalid-feedback d-block my-0"}," *請問要冰的？還是熱的？ ",-1),Z=["value"],$=o("div",{class:"modal-footer justify-content-between"},[o("button",{type:"submit",class:"btn btn-secondary"},"放入購物車")],-1);function ee(i,e,p,s,t,d){const V=h("LoadingDesign"),f=h("ErrorMessage"),g=h("Field"),L=h("VForm");return c(),r(_,null,[n(V,{"is-loading":t.isLoading},null,8,["is-loading"]),o("main",x,[o("section",U,[o("div",I,[o("img",{src:t.product.imageUrl,class:"img-fluid",alt:""},null,8,H),o("div",null,[o("div",j,[o("h2",M,a(t.product.mainTitle),1),o("h3",null,a(t.product.description),1),o("p",null,a(t.product.price)+" 元",1)]),t.product.is_select===1?(c(),C(L,{key:0,ref:"form",onSubmit:d.addToCartBtn},{default:u(()=>[t.groupProduct.select1?(c(),r("div",N,[R,n(f,{name:"selectedOption1"},{default:u(()=>[q]),_:1}),n(g,{id:"selectedOption1",name:"selectedOption1",as:"select",class:"form-select","aria-label":"Default select",rules:"required",modelValue:t.selectedOption1,"onUpdate:modelValue":e[0]||(e[0]=l=>t.selectedOption1=l)},{default:u(()=>[(c(!0),r(_,null,v(t.groupProduct.select1,l=>(c(),r("option",{value:l},a(l),9,G))),256))]),_:1},8,["modelValue"])])):m("",!0),t.groupProduct.select2?(c(),r("div",J,[z,n(f,{name:"selectedOption2"},{default:u(()=>[K]),_:1}),n(g,{id:"selectedOption2",name:"selectedOption2",as:"select",class:"form-select","aria-label":"Default select",rules:"required",modelValue:t.selectedOption2,"onUpdate:modelValue":e[1]||(e[1]=l=>t.selectedOption2=l)},{default:u(()=>[(c(!0),r(_,null,v(t.groupProduct.select2,l=>(c(),r("option",{value:l},a(l),9,Q))),256))]),_:1},8,["modelValue"])])):m("",!0),t.groupProduct.iceLevel?(c(),r("div",W,[X,n(f,{name:"iceLevel"},{default:u(()=>[Y]),_:1}),n(g,{id:"iceLevel",name:"iceLevel",as:"select",class:"form-select","aria-label":"Default select",rules:"required",modelValue:t.iceLevel,"onUpdate:modelValue":e[2]||(e[2]=l=>t.iceLevel=l)},{default:u(()=>[(c(!0),r(_,null,v(t.drinkType,(l,O)=>(c(),r("option",{key:O,value:l},a(l),9,Z))),128))]),_:1},8,["modelValue"])])):m("",!0),$]),_:1},8,["onSubmit"])):m("",!0),t.product.is_select!==1?(c(),r("button",{key:1,type:"btn",class:"btn btn-secondary",onClick:e[3]||(e[3]=(...l)=>d.addToCartBtn&&d.addToCartBtn(...l))},"放入購物車")):m("",!0)])]),D(" "+a(t.product),1)])])],64)}const ne=A(F,[["render",ee]]);export{ne as default};
